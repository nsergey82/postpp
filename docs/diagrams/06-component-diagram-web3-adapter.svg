<?xml version="1.0" encoding="UTF-8"?>
<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="700" fill="#f8f9fa" stroke="#e9ecef" stroke-width="2"/>
  
  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#212529">Web3 Adapter Container - Component Diagram</text>
  
  <!-- Container boundary -->
  <rect x="20" y="50" width="860" height="630" fill="none" stroke="#6c757d" stroke-width="3" stroke-dasharray="10,5"/>
  <text x="25" y="70" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#6c757d">Web3 Adapter Container</text>
  
  <!-- Core Components Group -->
  <rect x="40" y="90" width="400" height="280" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="8"/>
  <text x="45" y="110" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1976d2">Core Components</text>
  
  <!-- Web3 Adapter Main -->
  <rect x="60" y="120" width="160" height="80" fill="#bbdefb" stroke="#1565c0" stroke-width="2" rx="4"/>
  <text x="140" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#0d47a1">Web3 Adapter</text>
  <text x="140" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">Main Orchestrator</text>
  <text x="140" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">Platform Sync</text>
  <text x="140" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">Data Transform</text>
  <text x="140" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">Change Handler</text>
  
  <!-- Mapping Engine -->
  <rect x="240" y="120" width="160" height="80" fill="#bbdefb" stroke="#1565c0" stroke-width="2" rx="4"/>
  <text x="320" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#0d47a1">Mapping Engine</text>
  <text x="320" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">Field Mapping</text>
  <text x="320" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">toGlobal/fromGlobal</text>
  <text x="320" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">Data Transform</text>
  <text x="320" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">Platform Adapters</text>
  
  <!-- Mapping Database -->
  <rect x="60" y="220" width="160" height="70" fill="#bbdefb" stroke="#1565c0" stroke-width="2" rx="4"/>
  <text x="140" y="240" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#0d47a1">Mapping Database</text>
  <text x="140" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">SQLite Storage</text>
  <text x="140" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">Local â†’ Global ID</text>
  <text x="140" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">Mapping Persistence</text>
  
  <!-- EVault Client -->
  <rect x="240" y="220" width="160" height="70" fill="#bbdefb" stroke="#1565c0" stroke-width="2" rx="4"/>
  <text x="320" y="240" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#0d47a1">EVault Client</text>
  <text x="320" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">GraphQL Interface</text>
  <text x="320" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">MetaEnvelope Ops</text>
  <text x="320" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1565c0">Health Monitoring</text>
  
  <!-- Service Components Group -->
  <rect x="460" y="90" width="400" height="280" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="8"/>
  <text x="465" y="110" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#f57c00">Service Components</text>
  
  <!-- eVault Provisioner -->
  <rect x="480" y="120" width="160" height="80" fill="#ffe0b2" stroke="#ef6c00" stroke-width="2" rx="4"/>
  <text x="560" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#e65100">eVault Provisioner</text>
  <text x="560" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f57c00">eVault Creation</text>
  <text x="560" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f57c00">Registry Integration</text>
  <text x="560" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f57c00">Group Manifests</text>
  <text x="560" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f57c00">Retry Logic</text>
  
  <!-- Schema Manager -->
  <rect x="660" y="120" width="160" height="80" fill="#ffe0b2" stroke="#ef6c00" stroke-width="2" rx="4"/>
  <text x="740" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#e65100">Schema Manager</text>
  <text x="740" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f57c00">JSON Schemas</text>
  <text x="740" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f57c00">Ontology Mapping</text>
  <text x="740" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f57c00">Validation Rules</text>
  <text x="740" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f57c00">Platform Config</text>
  
  <!-- Logger System -->
  <rect x="480" y="220" width="160" height="70" fill="#ffe0b2" stroke="#ef6c00" stroke-width="2" rx="4"/>
  <text x="560" y="240" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#e65100">Logger System</text>
  <text x="560" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f57c00">Structured Logging</text>
  <text x="560" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f57c00">Transport Config</text>
  <text x="560" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f57c00">Audit Trail</text>
  
  <!-- Reference Manager -->
  <rect x="660" y="220" width="160" height="70" fill="#ffe0b2" stroke="#ef6c00" stroke-width="2" rx="4"/>
  <text x="740" y="240" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#e65100">Reference Manager</text>
  <text x="740" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f57c00">Cross-Platform Refs</text>
  <text x="740" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f57c00">Participant Notify</text>
  <text x="740" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f57c00">Relationship Links</text>
  
  <!-- Supporting Infrastructure Group -->
  <rect x="40" y="390" width="820" height="180" fill="#fce4ec" stroke="#c2185b" stroke-width="2" rx="8"/>
  <text x="45" y="410" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#c2185b">Supporting Infrastructure</text>
  
  <!-- Platform Mappings -->
  <rect x="60" y="430" width="140" height="70" fill="#f8bbd9" stroke="#ad1457" stroke-width="2" rx="4"/>
  <text x="130" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#880e4f">Platform Mappings</text>
  <text x="130" y="465" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#c2185b">JSON Config Files</text>
  <text x="130" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#c2185b">Field Mappings</text>
  <text x="130" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#c2185b">Transform Rules</text>
  
  <!-- Data Transformation -->
  <rect x="220" y="430" width="140" height="70" fill="#f8bbd9" stroke="#ad1457" stroke-width="2" rx="4"/>
  <text x="290" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#880e4f">Data Transform</text>
  <text x="290" y="465" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#c2185b">Bi-directional</text>
  <text x="290" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#c2185b">MetaEnvelope</text>
  <text x="290" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#c2185b">Format Conversion</text>
  
  <!-- Lock Management -->
  <rect x="380" y="430" width="140" height="70" fill="#f8bbd9" stroke="#ad1457" stroke-width="2" rx="4"/>
  <text x="450" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#880e4f">Lock Management</text>
  <text x="450" y="465" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#c2185b">Sync Prevention</text>
  <text x="450" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#c2185b">15s Timeout</text>
  <text x="450" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#c2185b">ID Tracking</text>
  
  <!-- External Services -->
  <rect x="60" y="520" width="780" height="40" fill="#e8f5e8" stroke="#4caf50" stroke-width="2" stroke-dasharray="5,3" rx="4"/>
  <text x="70" y="540" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#2e7d32">External Services:</text>
  <text x="180" y="540" font-family="Arial, sans-serif" font-size="9" fill="#388e3c">Registry Service</text>
  <text x="280" y="540" font-family="Arial, sans-serif" font-size="9" fill="#388e3c">Provisioner Service</text>
  <text x="400" y="540" font-family="Arial, sans-serif" font-size="9" fill="#388e3c">eVault GraphQL API</text>
  <text x="530" y="540" font-family="Arial, sans-serif" font-size="9" fill="#388e3c">Platform Applications</text>
  <text x="680" y="540" font-family="Arial, sans-serif" font-size="9" fill="#388e3c">Blockchain Networks</text>
  
  <!-- Relationships -->
  <!-- Web3 Adapter -> Mapping Engine -->
  <line x1="220" y1="160" x2="240" y2="160" stroke="#424242" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Web3 Adapter -> Mapping Database -->
  <line x1="140" y1="200" x2="140" y2="220" stroke="#424242" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Web3 Adapter -> EVault Client -->
  <line x1="220" y1="180" x2="240" y2="240" stroke="#424242" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Mapping Engine -> Platform Mappings -->
  <line x1="290" y1="200" x2="130" y2="430" stroke="#424242" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
  
  <!-- EVault Client -> eVault Provisioner -->
  <line x1="400" y1="250" x2="480" y2="180" stroke="#424242" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
  
  <!-- Schema Manager -> Data Transformation -->
  <line x1="740" y1="200" x2="290" y2="430" stroke="#424242" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#424242"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <rect x="40" y="590" width="300" height="80" fill="#ffffff" stroke="#dee2e6" stroke-width="1" rx="4"/>
  <text x="45" y="605" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#495057">Legend</text>
  <rect x="45" y="610" width="15" height="10" fill="#bbdefb" stroke="#1565c0" stroke-width="1"/>
  <text x="65" y="618" font-family="Arial, sans-serif" font-size="10" fill="#495057">Core Component</text>
  <rect x="160" y="610" width="15" height="10" fill="#ffe0b2" stroke="#ef6c00" stroke-width="1"/>
  <text x="180" y="618" font-family="Arial, sans-serif" font-size="10" fill="#495057">Service Component</text>
  <rect x="45" y="625" width="15" height="10" fill="#f8bbd9" stroke="#ad1457" stroke-width="1"/>
  <text x="65" y="633" font-family="Arial, sans-serif" font-size="10" fill="#495057">Infrastructure</text>
  <rect x="160" y="625" width="15" height="10" fill="#e8f5e8" stroke="#4caf50" stroke-width="1" stroke-dasharray="2,1"/>
  <text x="180" y="633" font-family="Arial, sans-serif" font-size="10" fill="#495057">External Service</text>
  <line x1="45" y1="645" x2="60" y2="645" stroke="#424242" stroke-width="2"/>
  <text x="65" y="648" font-family="Arial, sans-serif" font-size="10" fill="#495057">Direct Dependency</text>
  <line x1="160" y1="645" x2="175" y2="645" stroke="#424242" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="180" y="648" font-family="Arial, sans-serif" font-size="10" fill="#495057">Uses/Configures</text>
</svg>
